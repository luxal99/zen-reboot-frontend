<div class="dialog">
  <h1><b>Dodavanje paketa</b></h1>
  <div class="row">
    <div class="col-6" style="padding-left: 0">
      <app-form-date [config]="startDateInput" [group]="packageForm"></app-form-date>
    </div>
    <div class="col-6" style="padding-right: 0">
      <app-form-date [config]="endDateInput" [group]="packageForm"></app-form-date>
    </div>
  </div>
  <app-form-input [group]="packageForm" *ngIf="!data"
                  [config]="countInputConfig"></app-form-input>
  <div class="row" *ngIf="!data">
    <div class="col-6" style="padding-left: 0">
      <app-form-input [group]="packageForm" *ngIf="!data" label="Popust"
                      [config]="discountInputConfig"></app-form-input>
    </div>
    <div class="col-6" style="padding-right: 0">
      <app-form-select [config]="discountTypeSelectConfig"
                       *ngIf="!data"
                       label="Tip popusta"
                       [group]="packageForm"></app-form-select>
    </div>
  </div>
  <app-form-select *ngIf="!data" [group]="packageForm" [config]="paymentMethodSelectConfig"
                   label="Tip plaćanja"></app-form-select>
  <app-form-select *ngIf="!data" [group]="packageForm" label="Izaberi lokaciju"
                   [config]="locationSelectConfig"></app-form-select>
  <div class="row" *ngIf="!data">
    <div class="col-6" style="padding-left: 0">
      <app-form-select bindValue="name"
                       [config]="treatmentSelectConfig"
                       (onChange)="onTreatmentSelect()"
                       label="Izaberi tretman"
                       [group]="packageForm"></app-form-select>
    </div>
    <div class="col-6" style="padding-right: 0">
      <app-form-select bindValue="duration"
                       label="Izaberi trajanje"
                       [config]="durationSelectConfig"
                       [group]="packageForm"></app-form-select>
    </div>
  </div>
  <mat-accordion *ngIf="!data">
    <mat-expansion-panel>
      <mat-expansion-panel-header>Klijenti</mat-expansion-panel-header>
      <div class="client">
        <div class="row">
          <div class="col-6">
            <form [formGroup]="searchForm">
              <mat-form-field appearance="outline">
                <mat-label>Pretraži</mat-label>
                <input (input)="search()" matInput formControlName="search" [(ngModel)]="searchText">
                <mat-icon matSuffix>
                  search
                </mat-icon>
              </mat-form-field>
            </form>
          </div>
          <div class="col-6">
            <app-paginator (next)="getNext()" (prev)="getPrevious()"></app-paginator>
          </div>
        </div>
        <div class="row client-row" style="padding-top: 1em" *ngFor="let client of listOfClients"
             (click)="selectClient(client,$event)">
          <div class="col-sm">
            <div class="inline">
              <h1 class="first-letter-h1">{{client.person.firstName.substr(0, 1)}}</h1>
              <h2>{{client.person?.firstName}}</h2>
            </div>
          </div>
          <div class="col-sm">
            <h2>{{client.person?.lastName}}</h2>
          </div>
        </div>
      </div>
    </mat-expansion-panel>
  </mat-accordion>
  <button mat-button class="default-btn" (click)="save()">Dodaj</button>
  <mat-spinner diameter="25" #spinner></mat-spinner>
</div>
